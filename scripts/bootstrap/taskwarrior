#!/bin/bash
# üêä Jaka Taskwarrior Bootstrap
# Sets TASKDATA based on JAKA_MODE and PROJECT_ID

if [ -n "$PROJECT_ID" ]; then
    if [ "$JAKA_MODE" = "UNHINGED" ]; then
        export JAKA_HOME="$HOME/.candango/jaka_ai"
        export TASKRC="$JAKA_HOME/.taskrc"
        export TASKDATA="$JAKA_HOME/.task/$PROJECT_ID"
        
        # Ensure the .taskrc is in place
        if [ ! -f "$TASKRC" ]; then
            echo "üêä Initializing Unhinged Taskwarrior config..."
            mkdir -p "$JAKA_HOME"
            cp templates/taskwarrior/unhinged/.taskrc "$TASKRC"
        fi
    else
        export TASKDATA="$HOME/.task/$PROJECT_ID"
    fi
    mkdir -p "$TASKDATA"
    echo "üêä Task Data: $TASKDATA"
    [ -n "$TASKRC" ] && echo "üêä Task RC: $TASKRC"
fi
